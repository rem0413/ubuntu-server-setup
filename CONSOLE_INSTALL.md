# Console Installation Guide (VN)

H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng script c√†i ƒë·∫∑t qua console cho VPS Ubuntu.

## üöÄ C√†i ƒê·∫∑t Nhanh (Kh√¥ng C·∫ßn T∆∞∆°ng T√°c)

### C√†i T·∫•t C·∫£
```bash
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash -s -- --all
```

### S·ª≠ D·ª•ng Profile (Khuy·∫øn Ngh·ªã)

**Node.js App Stack:**
```bash
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash -s -- --profile nodejs-app
```
C√†i: Core + MongoDB + Node.js + PM2 + Nginx + Security

**Docker Host:**
```bash
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash -s -- --profile docker-host
```
C√†i: Core + Docker + Security

**Full Stack:**
```bash
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash -s -- --profile fullstack
```
C√†i: Core + MongoDB + PostgreSQL + Node.js + PM2 + Docker + Nginx + Security

**VPN Server:**
```bash
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash -s -- --profile vpn-server
```
C√†i: Core + Security + OpenVPN + SSH Hardening

## üìã C√†i ƒê·∫∑t T∆∞∆°ng T√°c (Console Menu)

### Ch·∫°y Menu
```bash
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash
```

### C√°ch S·ª≠ D·ª•ng Menu

Khi menu hi·ªán ra, b·∫°n s·∫Ω th·∫•y danh s√°ch 12 components:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           Select Components to Install                      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚ïê‚ïê‚ïê Core Installation ‚ïê‚ïê‚ïê
  [1]  System Update & Essential Tools (Recommended)
  [2]  MongoDB Database
  [3]  PostgreSQL Database
  [4]  Node.js & npm
  [5]  PM2 Process Manager (Requires Node.js)
  [6]  Docker & Docker Compose

‚ïê‚ïê‚ïê Web & Security ‚ïê‚ïê‚ïê
  [7]  Nginx Web Server (Cloudflare & Advanced Config)
  [8]  Security Tools (UFW, Fail2ban)
  [9]  OpenVPN Server & Client Management
  [10] SSH Security Hardening

‚ïê‚ïê‚ïê Additional Services ‚ïê‚ïê‚ïê
  [11] Redis Cache Server
  [12] Monitoring Stack (Prometheus/Grafana)

‚ïê‚ïê‚ïê Quick Options ‚ïê‚ïê‚ïê
  [0]  Install All Components
  [q]  Quit Installation

Enter your choice:
  - Single component: 1
  - Multiple components: 1 2 4 6 8
  - All components: 0
  - Cancel: q

>
```

**Nh·∫≠p l·ª±a ch·ªçn:**

1. **C√†i 1 component:** G√µ s·ªë, v√≠ d·ª•: `1`
2. **C√†i nhi·ªÅu components:** G√µ c√°c s·ªë c√°ch nhau b·ªüi d·∫•u c√°ch, v√≠ d·ª•: `1 2 4 6 8`
3. **C√†i t·∫•t c·∫£:** G√µ `0`
4. **H·ªßy:** G√µ `q`

**V√≠ d·ª•:**
```bash
> 1 4 5 7 8
# C√†i: Core + Node.js + PM2 + Nginx + Security

> 1 6 8
# C√†i: Core + Docker + Security

> 0
# C√†i t·∫•t c·∫£ 12 components

> q
# H·ªßy c√†i ƒë·∫∑t
```

### X√°c Nh·∫≠n

Sau khi ch·ªçn, script s·∫Ω hi·ªÉn th·ªã danh s√°ch components v√† y√™u c·∫ßu x√°c nh·∫≠n:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë              Installation Confirmation                      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

The following components will be installed:

  ‚úì System Update & Essential Tools
  ‚úì Node.js & npm
  ‚úì PM2 Process Manager
  ‚úì Nginx Web Server (Cloudflare & Advanced)
  ‚úì Security Tools (UFW, Fail2ban)

‚ö†Ô∏è  This will modify your system configuration
   Installation may take 10-30 minutes depending on components

Do you want to continue?
Type 'yes' to proceed, or 'no' to cancel:
```

G√µ `yes` ho·∫∑c `y` ƒë·ªÉ ti·∫øp t·ª•c.

## üõ†Ô∏è S·ª≠a L·ªói Th∆∞·ªùng G·∫∑p

### L·ªói 1: Menu kh√¥ng nh·∫≠n input t·ª´ b√†n ph√≠m

**Hi·ªán t∆∞·ª£ng:** Menu hi·ªán ra nh∆∞ng kh√¥ng g√µ ƒë∆∞·ª£c

**Nguy√™n nh√¢n:** Ch·∫°y qua SSH kh√¥ng c√≥ terminal ƒë·∫ßy ƒë·ªß

**Gi·∫£i ph√°p:** D√πng mode kh√¥ng t∆∞∆°ng t√°c
```bash
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash -s -- --profile nodejs-app
```

### L·ªói 2: Input timeout

**Hi·ªán t∆∞·ª£ng:** `Error: Input timeout or not available`

**Nguy√™n nh√¢n:** Shell kh√¥ng h·ªó tr·ª£ t∆∞∆°ng t√°c

**Gi·∫£i ph√°p:** D√πng flags
```bash
# Option 1: Profile
curl -fsSL URL | sudo bash -s -- --profile nodejs-app

# Option 2: Install all
curl -fsSL URL | sudo bash -s -- --all
```

### L·ªói 3: Invalid input format

**Hi·ªán t∆∞·ª£ng:** `Error: Invalid input format`

**Nguy√™n nh√¢n:** Nh·∫≠p sai format

**Gi·∫£i ph√°p:**
- Nh·∫≠p s·ªë c√°ch nhau b·ªüi d·∫•u c√°ch: `1 2 4 6`
- Kh√¥ng d√πng d·∫•u ph·∫©y: ~~`1,2,4,6`~~
- Kh√¥ng d√πng g·∫°ch ngang: ~~`1-4`~~

### L·ªói 4: Permission denied

**Hi·ªán t∆∞·ª£ng:** Script tho√°t v·ªõi l·ªói permission

**Gi·∫£i ph√°p:** Ph·∫£i ch·∫°y v·ªõi sudo
```bash
curl -fsSL URL | sudo bash
```

## üìä Components Chi Ti·∫øt

### Core Installation

**[1] System Update & Essential Tools**
- Update h·ªá th·ªëng
- C√†i build tools, git, curl, wget, vim
- Thi·∫øt l·∫≠p timezone, locale
- T·∫°o th∆∞ m·ª•c backup

**[2] MongoDB Database**
- MongoDB Community Edition (latest)
- T·ª± ƒë·ªông start v√† enable service
- T·∫°o admin user (optional)
- Port: 27017

**[3] PostgreSQL Database**
- PostgreSQL (latest stable)
- T·ª± ƒë·ªông start v√† enable service
- T·∫°o database v√† user (optional)
- Port: 5432

**[4] Node.js & npm**
- Node.js LTS via NVM
- npm latest
- Yarn package manager
- Global packages: pm2, nodemon

**[5] PM2 Process Manager**
- PM2 global installation
- PM2 startup script
- PM2 log rotation
- Y√™u c·∫ßu: Node.js [4]

**[6] Docker & Docker Compose**
- Docker CE (latest)
- Docker Compose V2
- Th√™m user v√†o docker group
- C·∫•u h√¨nh Docker daemon

### Web & Security

**[7] Nginx Web Server**
- Nginx (latest stable)
- Cloudflare real IP module
- Advanced configuration (caching, gzip, security headers)
- SSL/TLS setup templates
- Port: 80, 443

**[8] Security Tools**
- UFW Firewall (allow SSH, HTTP, HTTPS)
- Fail2ban (SSH protection)
- Unattended upgrades
- Basic security hardening

**[9] OpenVPN Server**
- OpenVPN server setup
- Easy-RSA PKI
- Client management scripts
- NAT v√† routing rules
- Port: 1194 UDP

**[10] SSH Security Hardening**
- Disable root login
- Change SSH port (optional)
- Key-only authentication
- Fail2ban SSH jail
- SSHD config optimization

### Additional Services

**[11] Redis Cache Server**
- Redis latest stable
- Bind to localhost
- Persistent storage config
- Password protection (optional)
- Port: 6379

**[12] Monitoring Stack**
- Prometheus
- Grafana
- Node Exporter
- Alert Manager
- Ports: 9090, 3000, 9100

## ‚è±Ô∏è Th·ªùi Gian C√†i ƒê·∫∑t

∆Ø·ªõc t√≠nh th·ªùi gian (tr√™n VPS 2GB RAM, 2 CPU):

| Profile | Components | Th·ªùi gian |
|---------|-----------|-----------|
| nodejs-app | 6 components | ~10 ph√∫t |
| docker-host | 3 components | ~5 ph√∫t |
| fullstack | 8 components | ~15 ph√∫t |
| vpn-server | 4 components | ~8 ph√∫t |
| All (12) | 12 components | ~25 ph√∫t |

## üìù Sau Khi C√†i ƒê·∫∑t

### 1. Xem T√≥m T·∫Øt
```bash
cat /root/ubuntu-setup-summary.txt
```

### 2. Ki·ªÉm Tra Services
```bash
# MongoDB
sudo systemctl status mongod

# Nginx
sudo systemctl status nginx

# Docker
sudo systemctl status docker

# PM2
pm2 status
```

### 3. Ki·ªÉm Tra Firewall
```bash
sudo ufw status verbose
```

### 4. Reload PATH
```bash
source ~/.bashrc
```

### 5. Test C√†i ƒê·∫∑t
```bash
# Node.js
node --version
npm --version

# Docker
docker --version
docker compose version

# MongoDB
mongosh --eval "db.version()"

# Nginx
sudo nginx -t
```

## üéØ V√≠ D·ª• Th·ª±c T·∫ø

### VPS M·ªõi - Node.js App

```bash
# 1. SSH v√†o VPS
ssh root@your-vps-ip

# 2. C√†i ƒë·∫∑t Node.js stack
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash -s -- --profile nodejs-app

# 3. Deploy app
cd /var/www
git clone https://github.com/user/app.git
cd app
npm install
pm2 start server.js --name myapp
pm2 save

# 4. Setup Nginx
sudo nano /etc/nginx/sites-available/myapp
sudo ln -s /etc/nginx/sites-available/myapp /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx
```

### Docker Host Setup

```bash
# 1. C√†i Docker
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash -s -- --profile docker-host

# 2. Logout v√† login l·∫°i (ƒë·ªÉ apply docker group)
exit
ssh root@your-vps-ip

# 3. Test Docker
docker run hello-world
docker compose version

# 4. Deploy v·ªõi Docker Compose
cd /opt
mkdir myapp && cd myapp
nano docker-compose.yml
docker compose up -d
```

### Custom Selection

```bash
# Ch·∫°y interactive
curl -fsSL https://raw.githubusercontent.com/rem0413/ubuntu-server-setup/master/remote-install.sh | sudo bash

# Khi menu hi·ªán:
> 1 2 4 5 7 8
# (Core + MongoDB + Node.js + PM2 + Nginx + Security)

# X√°c nh·∫≠n:
Type 'yes' to proceed, or 'no' to cancel: yes
```

## üîç Xem Logs

```bash
# Installation log
sudo cat /var/log/ubuntu-setup.log

# Service logs
sudo journalctl -u mongod -f
sudo journalctl -u nginx -f
sudo journalctl -u docker -f

# Firewall logs
sudo tail -f /var/log/ufw.log
```

## üí° Tips

1. **Lu√¥n d√πng profile** cho production ƒë·ªÉ tr√°nh c√†i th·ª´a
2. **Test v·ªõi --dry-run** tr∆∞·ªõc khi c√†i th·∫≠t
3. **Backup summary file** ngay sau khi c√†i
4. **ƒê·ªïi default passwords** cho MongoDB, Redis
5. **Setup SSL** cho Nginx sau khi c√†i
6. **Enable automatic updates** cho security

## üÜò H·ªó Tr·ª£

- **GitHub Issues:** https://github.com/rem0413/ubuntu-server-setup/issues
- **Documentation:** https://github.com/rem0413/ubuntu-server-setup
- **Installation Log:** `/var/log/ubuntu-setup.log`
- **Summary:** `/root/ubuntu-setup-summary.txt`
